#include <SPI.h>
#include <LoRa.h>

const int ventSwitch = 5;
const int dcSwitch = 6;
const int resetSwitch = 7;
String Command;
 

void setup() {
  LoRa.begin(915E6);
  Serial.begin(9600);
  pinMode(ventSwitch, INPUT);
  pinMode(dcSwitch, INPUT);
  pinMode(resetSwitch, INPUT);
}

void ventCom(){
  if (digitalRead(ventSwitch) == HIGH){
    Command = "VENT";
    Serial.println("VENTING"); 
  }
}

void dcCom(){
  if (digitalRead(dcSwitch) == HIGH){
    Command = "DISCONNECT";  
    Serial.println("DISCONNECTING");
  }
}

void resetCom(){
  if (digitalRead(resetSwitch) == HIGH){
    Command = "RESET";
    Serial.println("RESETTING"); 
  }
}

void getCom() {
  ventCom();
  dcCom();
  resetCom();
}

void loop() {
  Command = "CLOSE";
  getCom();
  LoRa.beginPacket();
  LoRa.print(Command);
  LoRa.endPacket();
}
